<!DOCTYPE html>
<html>
<head>
    <title>Admin Page</title>
</head>
<body>
<h1>Add Query to Database</h1>
<form action="/add-query" method="POST">
    <label for="query">Query:</label>
    <input type="text" id="query" name="query" required><br><br>
    <input type="submit" value="Submit">
</form>

<h1>Send Notifications</h1>
<div>
    <form action="/notify" method="post">
        <table id="query-table">
            <tr>
                <th>id</th>
                <th>Question</th>
                <th>Send</th>
            </tr>
            <% queries.forEach(query => { %>
                <tr>
                    <td><%= query.id %></td>
                    <td><%= query.question %></td>
                    <td>
                        <input type="checkbox" name="id" value="<%= query.id %>" onchange="handleCheckboxChange(this)">
                    </td>
                </tr>
            <% }) %>
        </table>
        <br><br>
        <label for="token">ExpoToken</label>
        <input type="text" id="token" name="token" placeholder="ExponentPushToken[nsfvcTJJYEaCICR7kfTtLG]" required><br><br>
        <input type="submit" value="Send Notification">
    </form>
</div>

<script>
    function handleCheckboxChange(checkbox) {
        const checkboxes = document.querySelectorAll('input[type="checkbox"][name="id"]');
        checkboxes.forEach((cb) => {
            if (cb !== checkbox) {
                cb.checked = false;
            }
        });
    }

</script>
</body>
</html>
